{% extends "base.html" %}

{% block title %}Logowanie{% endblock %}

{% block content %}
  <h2>Zaloguj się</h2>

  {# **THIS PART DISPLAYS ERRORS** #}
  {% if form.errors %}
    <p style="color: red; font-weight: bold;">Nazwa użytkownika lub hasło są nieprawidłowe. Spróbuj ponownie.</p>
  {% endif %}
  {# **************************** #}

  {% if user.is_authenticated %}
    <p>Jesteś już zalogowany.</p>
  {% else %}
    <form method="post" action="{% url 'login' %}">
      {% csrf_token %}
      {{ form.as_p }}
      <button type="submit">Zaloguj</button>
      {# Hidden input to redirect after login, if needed #}
      <input type="hidden" name="next" value="{{ next }}">
    </form>

    {# Link do resetowania hasła #}
    <p style="margin-top: 1rem;"><a href="{% url 'password_reset' %}">Nie pamiętasz hasła?</a></p>
    <p>Nie masz konta? <a href="{% url 'register' %}">Zarejestruj się</a></p>
  {% endif %}
{% endblock %}